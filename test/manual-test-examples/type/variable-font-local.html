<html>

<!-- NEXT: get axes/values from font file -->

<head>
  <meta charset="UTF-8">

  <style>
    body {
      padding: 0;
      margin: 0;
    }

    canvas {
      border: 1px solid #f0f0f0;
      display: block;
    }

    img {
      border: 1px solid #fff;
    }

    div {
      margin: 100px 0px;
    }
  </style>
</head>

<body>
  <script type="module">
    import p5 from '../../../src/app.js';

    let sketch = function (p) {
      let font, path = './font/BricolageGrotesque-Variable.ttf';
      
      p.setup = async function () {
        p.createCanvas(800, 200);
        font = await p.loadFont(path);
        console.log(font.data);
        
        p.textAlign(p.CENTER, p.CENTER);
        p.textSize(60);
      }

      p.draw = function () {
        p.background(255);
        //if (p.frameCount > 5) p.noLoop();

        let m = p.map(p.cos(p.frameCount / 20), -1, 1, 200, 800);// m = 100;
        let n = p.map(p.sin(p.frameCount / 30), -1, 1, 75, 100); // n = 400;
        let o = p.map(p.sin(p.frameCount / 20), -1, 1, 12, 48); // o = 48; 

        p.textFont(font, 72, {
          fontVariationSettings: `"wght" ${m}, "wdth" ${n}, "opsz" ${o}`
        });
        p.text(`This is a variable font.`, 400, 100);

        let bb = p.textBounds(`This is a variable font.`, 400, 100);
        p.noFill().stroke(0).rect(bb.x, bb.y, bb.w, bb.h);
      };
    };

    new p5(sketch);
  </script>

</body>


</html>